# 🔐 아이온2야.com 관리자 가이드

이 문서는 아이온2야.com의 관리자 기능 사용 방법을 설명합니다.

---

## 📋 목차

1. [관리자 권한](#관리자-권한)
2. [관리자 인증](#관리자-인증)
3. [게시글 작성](#게시글-작성)
4. [게시글 삭제](#게시글-삭제)
5. [관리자 표시](#관리자-표시)
6. [보안 주의사항](#보안-주의사항)

---

## 🔑 관리자 권한

### 관리자만 가능한 작업
- **게시판 글 작성**: 관리자만 공지사항 작성 가능
- **모든 게시글 삭제**: 관리자 비밀번호로 모든 게시글 즉시 삭제 가능 ⭐
  - 게시판 (board): 관리자 글 + 일반 유저 글 모두 삭제 가능
  - 건의사항 (suggestion): 관리자 글 + 일반 유저 글 모두 삭제 가능
  - 작성자 비밀번호 불필요 (관리자 비밀번호만으로 삭제)
- **관리자 배지**: 자동으로 "ADMIN" 배지 표시 (글로우 효과)

### 일반 사용자 가능한 작업
- **건의사항 작성**: 모든 사용자가 익명으로 건의사항 작성 가능
- **본인 게시글 삭제**: 작성 시 입력한 비밀번호로 자신의 게시글만 삭제 가능

---

## 🔐 관리자 인증

### 관리자 비밀번호
```
비밀번호: admin1234
```

**⚠️ 중요: 이 비밀번호는 실제 배포 전에 반드시 변경해야 합니다!**

### 비밀번호 변경 방법

1. **코드에서 변경** (`lib/utils.ts`)
```typescript
export function isAdmin(password: string): boolean {
  return password === 'YOUR_NEW_PASSWORD'; // 여기를 변경
}
```

2. **또는 환경변수 사용** (권장)
```env
# .env.local 파일 생성
ADMIN_PASSWORD=your_secure_password_here
```

```typescript
// lib/utils.ts 수정
export function isAdmin(password: string): boolean {
  return password === process.env.ADMIN_PASSWORD;
}
```

---

## ✍️ 게시글 작성

### 게시판 (관리자 전용)

1. **사이트 접속**: http://localhost:3000 (또는 배포된 URL)
2. **게시판으로 이동**: 상단 네비게이션에서 "게시판" 클릭
3. **글쓰기 버튼**: 우측 상단 "글쓰기" 버튼 클릭
4. **작성 폼 입력**:
   - **닉네임**: 아무거나 입력 (자동으로 "관리자"로 변경됨)
   - **비밀번호**: `admin1234` 입력 (관리자 비밀번호)
   - **제목**: 공지사항 제목 입력
   - **내용**: 공지사항 내용 입력
5. **작성완료 버튼**: 클릭하여 게시

### 관리자 인증 실패 시
```
에러 메시지: "게시판은 관리자만 작성할 수 있습니다."
→ 비밀번호를 admin1234로 다시 입력
```

### 건의사항 (모든 사용자)

- 건의사항은 관리자 비밀번호 없이도 작성 가능
- 관리자 비밀번호로 작성하면 "ADMIN" 배지 표시

---

## 🗑️ 게시글 삭제

### ⭐ 관리자가 모든 게시글 삭제하기 (중요!)

**관리자는 관리자 비밀번호로 모든 게시글을 삭제할 수 있습니다.**

1. **게시글 클릭**: 삭제하려는 게시글 클릭 (관리자/일반 유저 글 모두 가능)
2. **삭제 버튼**: 우측 상단의 빨간색 "삭제" 버튼 클릭
   - ✅ 모든 게시글에 삭제 버튼이 표시됩니다
3. **비밀번호 입력**: 관리자 비밀번호 (`admin1234`) 입력
4. **삭제 확인**: "삭제" 버튼 클릭

### 관리자 삭제 권한

- ✅ **게시판 (board)**: 관리자 게시글 + 일반 유저 게시글 모두 삭제 가능
- ✅ **건의사항 (suggestion)**: 관리자 게시글 + 일반 유저 게시글 모두 삭제 가능
- 🔐 **보안**: 관리자 비밀번호 인증 필수

### 일반 사용자 게시글 삭제

일반 사용자는 자신이 작성한 게시글만 삭제할 수 있습니다:

1. **게시글 클릭**: 자신이 작성한 게시글 클릭
2. **삭제 버튼**: 우측 상단의 "삭제" 버튼 클릭
3. **비밀번호 입력**: 작성 시 입력한 비밀번호 입력
4. **삭제 확인**: "삭제" 버튼 클릭

### 삭제 로직

```
비밀번호 입력 시:
1. 먼저 관리자 비밀번호인지 체크
   → 맞으면 즉시 삭제 ✅
2. 관리자 비밀번호가 아니면 작성자 비밀번호 체크
   → 맞으면 삭제 ✅
   → 틀리면 "비밀번호가 일치하지 않습니다" ❌
```

---

## 🎨 관리자 표시

### ADMIN 배지

관리자가 작성한 게시글은 자동으로 특별한 배지가 표시됩니다:

```
┌──────────────────────────┐
│  ✨ [ADMIN] ✨          │ ← 글로우 애니메이션 효과
│  🛡️ Shield 아이콘       │
│  빨강-주황 그라데이션      │
│  펄스 애니메이션           │
└──────────────────────────┘
```

**특징:**
- 🔴 빨강-주황 그라데이션 배경
- ✨ 글로우 효과 (blur + pulse)
- 🛡️ Shield 아이콘
- 📝 자동으로 닉네임이 "관리자"로 변경
- 🚫 사용자가 사칭할 수 없음 (비밀번호 필요)

---

## 🔒 보안 주의사항

### 비밀번호 관리

1. **개발 환경**
   - 현재 비밀번호: `admin1234`
   - 테스트용으로만 사용

2. **배포 전 필수 작업**
   ```bash
   # .env.local 파일 생성
   echo "ADMIN_PASSWORD=your_secure_password_123!@#" > .env.local

   # .gitignore에 추가 (이미 추가되어 있음)
   echo ".env*.local" >> .gitignore
   ```

3. **강력한 비밀번호 조건**
   - 최소 12자 이상
   - 대소문자, 숫자, 특수문자 조합
   - 추측하기 어려운 조합

### 비밀번호 해싱

- 모든 비밀번호는 **bcrypt (10 rounds)**로 해싱되어 저장
- 평문 비밀번호는 저장되지 않음
- 데이터베이스에서도 원본 비밀번호 확인 불가

### 관리자 권한 확인 로직

```typescript
// lib/utils.ts
export function isAdmin(password: string): boolean {
  // 평문 비밀번호를 관리자 비밀번호와 비교
  return password === process.env.ADMIN_PASSWORD || password === 'admin1234';
}
```

**작동 원리:**
1. 사용자가 글 작성 시 비밀번호 입력
2. 서버에서 `isAdmin()` 함수로 확인
3. 관리자 비밀번호 일치 시 → `isAdmin: true` 설정
4. 비밀번호는 bcrypt로 해싱하여 저장
5. 닉네임 자동으로 "관리자"로 변경

---

## 📱 사용 시나리오

### 시나리오 1: 공지사항 작성

```
1. 게임 업데이트 공지사항 작성
   - 게시판 → 글쓰기
   - 비밀번호: admin1234
   - 제목: "[공지] 아이온2 정식 출시일 안내"
   - 내용: "2025년 11월 19일 정식 출시..."
   - 작성완료 클릭

2. 결과:
   - ✅ 게시글 작성 완료
   - 🎨 "ADMIN" 배지 자동 표시
   - 👤 작성자명 "관리자"로 표시
```

### 시나리오 2: 스팸/부적절한 게시글 삭제

```
1. 게시판 또는 건의사항에서 부적절한 게시글 발견
   (관리자 글이든 일반 유저 글이든 상관없음)
2. 해당 게시글 클릭
3. 우측 상단 빨간색 "삭제" 버튼 클릭
4. 관리자 비밀번호 입력: admin1234
5. 삭제 확인 클릭

결과:
- ✅ 관리자 권한으로 게시글 즉시 삭제
- 💡 작성자 비밀번호 불필요 (관리자 비밀번호만으로 삭제 가능)
```

### 시나리오 3: 건의사항에 관리자 답변

```
1. 건의사항 게시판 접속
2. 글쓰기 클릭
3. 관리자 비밀번호로 작성
   - 비밀번호: admin1234
   - 제목: "[답변] 패키지 효율 계산기 개발 일정"
   - 내용: "안녕하세요, 관리자입니다..."

4. 결과:
   - ✅ 관리자 배지와 함께 건의사항에 답변 게시
   - 👥 사용자들이 관리자 답변임을 명확히 인지
```

---

## 🚨 문제 해결

### Q: 관리자 비밀번호를 입력했는데 작성이 안 돼요
**A:** 다음을 확인하세요:
- 비밀번호 오타 확인 (admin1234)
- 게시판 페이지에서 작성 중인지 확인
- 브라우저 콘솔에서 에러 메시지 확인

### Q: 일반 유저가 작성한 글을 삭제할 수 있나요?
**A:**
- ✅ 네! 관리자는 관리자 비밀번호로 모든 게시글을 삭제할 수 있습니다
- 게시글 클릭 → 삭제 버튼 → 관리자 비밀번호 입력 (admin1234)
- 작성자 비밀번호를 몰라도 관리자 비밀번호만으로 삭제 가능

### Q: 삭제 버튼이 안 보여요
**A:**
- 모든 게시글에 삭제 버튼이 표시됩니다
- 게시글을 클릭하여 상세 페이지로 이동하세요
- 우측 상단에 빨간색 "삭제" 버튼이 있습니다

### Q: 관리자 배지가 표시되지 않아요
**A:**
- 관리자 비밀번호로 작성했는지 확인
- 페이지 새로고침 (Ctrl + F5)
- 브라우저 캐시 삭제 후 재시도

---

## 🔄 업데이트 내역

**2025-11-11 v2**
- ✅ 관리자가 모든 게시글 삭제 가능 기능 추가 ⭐
- ✅ 모든 게시글에 삭제 버튼 표시
- ✅ 관리자 비밀번호 우선순위 삭제 로직 적용
- ✅ 문서 업데이트 (삭제 가이드 추가)

**2025-11-11 v1**
- ✅ 관리자 게시글 삭제 기능 추가
- ✅ 관리자 배지 디자인 개선 (글로우 효과)
- ✅ 게시글 상세 페이지 추가
- ✅ 비밀번호 힌트 제거 (보안 강화)

---

## 📞 문의

관리자 기능 관련 문의:
- 이메일: aion2ya.com@gmail.com
- 건의사항 게시판 이용

---

**⚠️ 중요: 실제 배포 전 관리자 비밀번호를 반드시 변경하세요!**
